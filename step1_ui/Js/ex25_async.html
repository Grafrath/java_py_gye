<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
    </head>
    
    <body>
        <script>
            //함수 앞에 async 키워드를 붙이면 자동으로 비동기 함수가 된다.
            //비동기 함수는 결과를 항상 Promise를 반환한다.

            async function fetchData1() {
                return '데이터';
            }

            fetchData1().then(data => console.log(data)); // "데이터"

            //await
            //비동기 함수에서만 사용할 수 있으며, Promise가 처리될 때까지 함수 실행을 일시적으로 중지한다.

            async function fetchData2() {
                //다른 서버에 데이터를 달라고 요청
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1'); // 데이터를 기다림
                const data = await response.json(); // JSON으로 변환 완료될 때까지 기다림
                return data;
            }
            fetchData2()
                //성공시 then
                // Promise가 resolve되면 posts 출력
                .then(posts => console.log(posts))
                //실패시 then
                .catch(error => console.error('Error:', error)); // 실패 시 에러 처리

        </script>
    </body>

</html>