<!DOCTYPE html>

<html>
    
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background-color: #f5f5f5;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 40px;
            }
        
            h1 {
                color: #333;
            }
        
            input {
                padding: 10px;
                font-size: 16px;
                width: 250px;
                border: 1px solid #ccc;
                border-radius: 4px;
                margin-right: 10px;
            }
        
            button {
                padding: 10px 20px;
                font-size: 16px;
                background-color: #4CAF50;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }
        
            button:hover {
                background-color: #45a049;
            }
        
            ul {
                list-style: none;
                padding: 0;
                margin-top: 20px;
                width: 300px;
            }
        
            li {
                background-color: white;
                margin-bottom: 10px;
                padding: 10px;
                border-radius: 4px;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            }
        
            li:nth-child(even) {
                background-color: #f0f0f0;
            }
        
            .no-result {
                text-align: center;
                color: #999;
                font-style: italic;
            }
        </style>
    </head>

    <body>
        <!-- 응답 받은 음악 제목과 가수를 <ul> 목록에 출력, 검색 결과가 없을 경우 "검색 결과 없음"을 표시한다 -->

        <h1>iTunes 검색</h1>
        <div>
            <!-- 검색어 입력 -->
            <input id="search" placeholder="검색어 입력 (예: BTS)">
            <!-- 버튼 클릭 시 검색 -->
            <button id="call">검색</button>
        </div>
        <!-- 결과 출력 -->
        <ul id="result"></ul>

        <script>
            const button = document.getElementById('call');
            const input = document.getElementById('search');
            const result = document.getElementById('result');

            button.addEventListener('click', async () => {
                    const keyword = input.value.trim(); // 입력값 가져오기
                    if (!keyword) {
                        alert('검색어를 입력해주세요.');
                        return;
                    }

                    result.innerHTML = ''; // 이전 검색 결과 초기화

                    try {
                        const response = await fetch(
                            `https://itunes.apple.com/search?term=${keyword}&entity=song&limit=5`
                        );

                        if (!response.ok) throw new Error('에러가 발생했습니다.');
                        const data = await response.json();

                        // 검색 결과가 없을 경우
                        if (data.resultCount === 0) {
                            result.innerHTML = '<li>검색 결과 없음</li>';
                        } else {
                            // 결과 출력
                            data.results.forEach(item => {
                                const li = document.createElement('li');
                                li.textContent = `${item.trackName} - ${item.artistName}`;
                                result.appendChild(li);
                            });
                        }
                    } catch(error) {
                        console.error('불러오기 실패:', error);
                    }
                })
        </script>
    </body>

</html>